<!DOCTYPE html>
<html lang="id" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kimjong V22 - Holo Flow</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@300;500;700&family=Inter:wght@300;500;700&display=swap" rel="stylesheet">
    
    <!-- Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <!-- Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/vanilla-tilt@1.8.0/lib/vanilla-tilt.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: { 
                        hud: ['Chakra Petch', 'sans-serif'],
                        sans: ['Inter', 'sans-serif']
                    },
                    colors: {
                        holo: {
                            bg: '#030014',
                            card: 'rgba(20, 20, 40, 0.6)',
                            border: 'rgba(120, 119, 198, 0.3)',
                            primary: '#7000ff', // Electric Purple
                            cyan: '#00f0ff',    // Cyber Cyan
                            pink: '#ff0080'     // Neon Pink
                        }
                    },
                    animation: {
                        'grid-move': 'gridMove 20s linear infinite',
                        'pulse-neon': 'pulseNeon 2s infinite',
                        'float': 'float 4s ease-in-out infinite',
                    },
                    keyframes: {
                        gridMove: { '0%': { backgroundPosition: '0 0' }, '100%': { backgroundPosition: '0 1000px' } },
                        pulseNeon: { '0%, 100%': { boxShadow: '0 0 5px #00f0ff' }, '50%': { boxShadow: '0 0 20px #00f0ff, 0 0 10px #7000ff' } },
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #030014; color: #fff; overflow-x: hidden; -webkit-tap-highlight-color: transparent; }
        
        /* Cyber Grid Background */
        .cyber-grid {
            position: fixed; inset: 0; z-index: -2;
            background-image: linear-gradient(rgba(112, 0, 255, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(112, 0, 255, 0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            transform: perspective(500px) rotateX(60deg);
            transform-origin: center top;
            animation: gridMove 10s linear infinite;
            opacity: 0.3;
        }

        /* Glassmorphism */
        .glass {
            background: rgba(15, 15, 25, 0.7);
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.5);
        }

        /* Battle Pass Bar */
        .xp-bar-container { background: #1a1a2e; border-radius: 99px; overflow: hidden; height: 8px; }
        .xp-bar-fill { 
            background: linear-gradient(90deg, #00f0ff, #7000ff, #ff0080); 
            height: 100%; width: 0%; transition: width 1s ease-out;
            box-shadow: 0 0 10px #7000ff;
        }

        /* Glitch Text Effect (Simple) */
        .glitch-text:hover {
            animation: glitch 0.3s cubic-bezier(.25, .46, .45, .94) both infinite;
            color: #00f0ff;
        }
        @keyframes glitch {
            0% { transform: translate(0) }
            20% { transform: translate(-2px, 2px) }
            40% { transform: translate(-2px, -2px) }
            60% { transform: translate(2px, 2px) }
            80% { transform: translate(2px, -2px) }
            100% { transform: translate(0) }
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="antialiased font-sans pb-32">

    <!-- Background -->
    <div class="fixed inset-0 bg-gradient-to-b from-[#030014] to-[#0a0a1a] -z-10"></div>
    <div class="cyber-grid"></div>

    <!-- === AUTH SCREEN === -->
    <div id="authScreen" class="fixed inset-0 z-[100] flex flex-col items-center justify-center p-6 bg-black/90 backdrop-blur-xl">
        <div class="relative w-32 h-32 mb-8 flex items-center justify-center">
            <div class="absolute inset-0 border-2 border-holo-cyan/30 rounded-full animate-[spin_4s_linear_infinite]"></div>
            <div class="absolute inset-2 border-2 border-holo-primary/50 rounded-full border-t-transparent animate-[spin_2s_linear_infinite_reverse]"></div>
            <i class="fa-solid fa-gamepad text-5xl text-white animate-float"></i>
        </div>
        
        <h1 class="font-hud text-3xl font-bold tracking-widest text-white mb-2">KIMJONG<span class="text-holo-cyan">.OS</span></h1>
        <p class="text-gray-500 text-xs tracking-[0.3em] mb-10">V22.0 BATTLE PASS</p>
        
        <input type="text" id="loginName" class="w-full max-w-xs bg-white/5 border border-white/10 rounded-xl px-5 py-4 text-center text-white focus:border-holo-cyan focus:outline-none transition-all font-hud tracking-wide mb-4" placeholder="ENTER CODENAME">
        
        <button onclick="login()" class="w-full max-w-xs bg-holo-primary hover:bg-purple-600 text-white font-bold py-4 rounded-xl transition-all shadow-[0_0_20px_rgba(112,0,255,0.4)]">
            START GAME
        </button>
        
        <!-- Secret Admin Trigger -->
        <div onclick="triggerAdmin()" class="mt-8 opacity-20 hover:opacity-100 cursor-pointer">
            <i class="fa-solid fa-user-secret text-xl text-red-500"></i>
        </div>
    </div>

    <!-- === MAIN APP === -->
    <div id="appScreen" class="hidden animate__animated animate__fadeIn">
        
        <!-- HEADER -->
        <header class="fixed top-0 w-full z-50 glass h-16 border-b-0">
            <div class="max-w-md mx-auto px-5 h-full flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="relative">
                        <img id="navAvatar" src="" class="w-10 h-10 rounded-lg border border-holo-cyan bg-black object-cover">
                        <div class="absolute -top-1 -right-1 bg-holo-primary text-[8px] px-1.5 rounded font-bold" id="levelBadge">LV.1</div>
                    </div>
                    <div>
                        <h3 id="navName" class="font-hud font-bold text-sm text-white uppercase">PLAYER</h3>
                        <div class="flex items-center gap-1">
                            <div class="w-2 h-2 rounded-full bg-green-500 animate-pulse"></div>
                            <p class="text-[9px] text-holo-cyan">SERVER ONLINE</p>
                        </div>
                    </div>
                </div>
                
                <div class="text-right">
                    <p class="text-[10px] text-gray-400 font-mono">CREDITS</p>
                    <p class="font-hud font-bold text-holo-cyan text-lg" id="navBalance">Rp 0</p>
                </div>
            </div>
        </header>

        <!-- CONTENT -->
        <main class="pt-24 px-5 max-w-md mx-auto">

            <!-- BATTLE PASS CARD -->
            <div class="glass p-5 rounded-2xl mb-8 relative overflow-hidden group border border-holo-border">
                <div class="absolute top-0 right-0 w-32 h-32 bg-holo-primary/20 blur-3xl rounded-full"></div>
                
                <div class="flex justify-between items-end mb-2">
                    <h3 class="font-hud font-bold text-white italic text-lg">BATTLE PASS</h3>
                    <span class="text-xs text-holo-cyan font-mono" id="xpText">0 / 500 XP</span>
                </div>
                
                <div class="xp-bar-container mb-4">
                    <div id="xpBar" class="xp-bar-fill"></div>
                </div>
                
                <div class="flex justify-between items-center bg-black/30 p-2 rounded-lg border border-white/5">
                    <div class="flex items-center gap-2">
                        <i class="fa-solid fa-gift text-holo-pink animate-bounce"></i>
                        <span class="text-xs text-gray-300">Next Reward:</span>
                    </div>
                    <span class="text-xs font-bold text-white">Rp 2.000</span>
                </div>
            </div>

            <!-- WALLET ACTIONS -->
            <div class="grid grid-cols-2 gap-3 mb-8">
                <button onclick="deposit()" class="glass p-4 rounded-xl flex flex-col items-center gap-2 hover:border-holo-cyan transition-all group">
                    <div class="w-10 h-10 rounded-full bg-holo-cyan/10 flex items-center justify-center text-holo-cyan group-hover:scale-110 transition-transform">
                        <i class="fa-solid fa-plus text-lg"></i>
                    </div>
                    <span class="text-xs font-bold">DEPOSIT</span>
                </button>
                <button onclick="openHistory()" class="glass p-4 rounded-xl flex flex-col items-center gap-2 hover:border-holo-primary transition-all group">
                    <div class="w-10 h-10 rounded-full bg-holo-primary/10 flex items-center justify-center text-holo-primary group-hover:scale-110 transition-transform">
                        <i class="fa-solid fa-clock-rotate-left text-lg"></i>
                    </div>
                    <span class="text-xs font-bold">HISTORY</span>
                </button>
            </div>

            <!-- CATEGORIES -->
            <div class="flex gap-2 overflow-x-auto no-scrollbar mb-6">
                <button onclick="filter('all')" class="cat-btn active bg-white text-black px-5 py-2 rounded-full text-xs font-bold font-hud uppercase whitespace-nowrap">All Items</button>
                <button onclick="filter('Games')" class="cat-btn glass text-gray-400 px-5 py-2 rounded-full text-xs font-bold font-hud uppercase whitespace-nowrap hover:text-white hover:border-holo-cyan">Games</button>
                <button onclick="filter('Apps')" class="cat-btn glass text-gray-400 px-5 py-2 rounded-full text-xs font-bold font-hud uppercase whitespace-nowrap hover:text-white hover:border-holo-primary">Apps</button>
                <button onclick="filter('Voucher')" class="cat-btn glass text-gray-400 px-5 py-2 rounded-full text-xs font-bold font-hud uppercase whitespace-nowrap hover:text-white hover:border-holo-pink">Voucher</button>
            </div>

            <!-- PRODUCT GRID -->
            <div id="productGrid" class="grid grid-cols-2 gap-4 pb-24">
                <!-- Injected JS -->
            </div>

        </main>

        <!-- BOTTOM DOCK (Floating) -->
        <div class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[85%] max-w-sm h-16 glass rounded-2xl flex justify-around items-center px-4 z-40 border border-white/10 shadow-[0_10px_30px_rgba(0,0,0,0.5)]">
            <button onclick="window.scrollTo(0,0)" class="text-holo-cyan flex flex-col items-center hover:scale-110 transition-transform">
                <i class="fa-solid fa-house-signal text-xl"></i>
            </button>
            <button onclick="openPass()" class="text-gray-400 hover:text-white hover:scale-110 transition-transform">
                <i class="fa-solid fa-medal text-xl"></i>
            </button>
            <button onclick="contactAdmin()" class="text-gray-400 hover:text-white hover:scale-110 transition-transform">
                <i class="fa-brands fa-whatsapp text-xl"></i>
            </button>
            <button onclick="logout()" class="text-gray-400 hover:text-red-500 hover:scale-110 transition-transform">
                <i class="fa-solid fa-power-off text-xl"></i>
            </button>
        </div>

    </div>

    <!-- === MODALS === -->

    <!-- ORDER MODAL -->
    <div id="orderModal" class="fixed inset-0 z-[60] hidden flex items-end sm:items-center justify-center bg-black/90 backdrop-blur-sm">
        <div class="bg-[#050510] border border-holo-primary w-full max-w-sm sm:rounded-2xl rounded-t-3xl p-6 shadow-[0_0_50px_rgba(112,0,255,0.2)] animate__animated animate__slideInUp">
            
            <div class="flex gap-4 mb-6">
                <img id="mImg" class="w-16 h-16 rounded-xl bg-white/5 p-2 object-contain border border-holo-border">
                <div>
                    <h3 id="mTitle" class="font-hud font-bold text-lg text-white">Product</h3>
                    <p class="text-[10px] text-gray-400 uppercase tracking-widest mb-1">INSTANT DELIVERY</p>
                    <p id="mPrice" class="text-holo-cyan font-bold text-xl font-mono">Rp 0</p>
                </div>
            </div>

            <div class="space-y-4">
                <div>
                    <label class="text-[10px] font-bold text-gray-500 uppercase ml-1">User ID / Zone</label>
                    <input type="text" id="targetId" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 text-white focus:border-holo-cyan focus:outline-none transition-colors font-mono" placeholder="12345678">
                </div>
                
                <div class="grid grid-cols-2 gap-3">
                    <button onclick="selectPay('saldo')" id="paySaldo" class="p-3 rounded-xl border border-holo-primary bg-holo-primary/20 text-left transition-all">
                        <p class="text-[10px] text-gray-400">CREDITS</p>
                        <p class="text-xs font-bold text-white mt-1">NO FEE</p>
                    </button>
                    <button onclick="selectPay('qris')" id="payQris" class="p-3 rounded-xl border border-white/10 bg-transparent text-left transition-all hover:border-white">
                        <p class="text-[10px] text-gray-400">QRIS</p>
                        <p class="text-xs font-bold text-white mt-1">E-WALLET</p>
                    </button>
                </div>

                <div class="flex gap-3 mt-4">
                    <button onclick="closeModal('orderModal')" class="flex-1 py-3 rounded-xl border border-white/20 text-gray-400 font-bold hover:text-white">BATAL</button>
                    <button onclick="processOrder()" class="flex-[2] py-3 rounded-xl bg-holo-primary text-white font-bold hover:bg-purple-600 shadow-lg shadow-purple-600/30">CONFIRM</button>
                </div>
            </div>
        </div>
    </div>

    <!-- DEPOSIT MODAL -->
    <div id="depositModal" class="fixed inset-0 z-[70] hidden flex items-center justify-center bg-black/90 backdrop-blur-md p-4">
        <div class="w-full max-w-sm glass rounded-2xl p-6 text-center border border-holo-cyan/30">
            <h3 class="font-hud text-xl font-bold mb-2 text-white">RECHARGE</h3>
            <div class="bg-white p-2 rounded-xl inline-block mb-4 shadow-[0_0_20px_rgba(0,240,255,0.3)]">
                <img src="https://files.catbox.moe/2gdzca.jpg" class="w-40 h-40 object-contain">
            </div>
            <input type="number" id="depAmount" class="w-full bg-white/5 border border-white/10 rounded-xl p-3 text-center text-white mb-4 focus:border-holo-cyan focus:outline-none font-mono font-bold text-lg" placeholder="MIN 10.000">
            
            <div class="flex gap-2">
                <button onclick="closeModal('depositModal')" class="flex-1 py-3 rounded-xl border border-white/20 text-gray-400 font-bold text-xs">CANCEL</button>
                <button onclick="confirmDeposit()" class="flex-[2] py-3 rounded-xl bg-green-500 text-white font-bold text-xs hover:bg-green-600">I HAVE PAID</button>
            </div>
        </div>
    </div>

    <!-- ADMIN MODAL -->
    <div id="adminModal" class="fixed inset-0 z-[120] hidden bg-black flex flex-col justify-center items-center p-6">
        <div class="w-full max-w-sm glass p-6 rounded-2xl border border-red-500/50">
            <h2 class="text-xl font-bold text-red-500 mb-4 font-hud tracking-widest">GOD MODE V6</h2>
            <div class="space-y-3">
                <button onclick="adminAction('saldo')" class="w-full bg-white/5 py-3 rounded-xl text-sm font-bold border border-white/10 hover:bg-white/10">+ Inject 1M Credits</button>
                <button onclick="adminAction('xp')" class="w-full bg-white/5 py-3 rounded-xl text-sm font-bold border border-white/10 hover:bg-white/10">+ Inject 1000 XP</button>
                <button onclick="logout()" class="w-full bg-red-500/20 text-red-500 py-3 rounded-xl text-sm font-bold border border-red-500/30">Force Reset</button>
            </div>
            <button onclick="closeModal('adminModal')" class="mt-4 text-xs text-gray-500 w-full">Close</button>
        </div>
    </div>

    <script>
        // CONFIG
        const CONFIG = {
            wa: "6281225980437",
            qris: "https://files.catbox.moe/2gdzca.jpg"
        };

        const products = [
            { id: 1, name: "MLBB 86 DM", price: 20000, img: "https://cdn-icons-png.flaticon.com/512/3408/3408506.png", cat: "Games" },
            { id: 2, name: "Free Fire 140 DM", price: 19500, img: "https://cdn-icons-png.flaticon.com/512/2696/2696459.png", cat: "Games" },
            { id: 3, name: "PUBG 60 UC", price: 14500, img: "https://cdn-icons-png.flaticon.com/512/2099/2099238.png", cat: "Games" },
            { id: 4, name: "Weekly Pass", price: 27500, img: "https://cdn-icons-png.flaticon.com/512/8044/8044321.png", cat: "Games" },
            { id: 5, name: "Netflix 1 Bulan", price: 25000, img: "https://cdn-icons-png.flaticon.com/512/2504/2504929.png", cat: "Apps" },
            { id: 6, name: "Spotify Premium", price: 15000, img: "https://cdn-icons-png.flaticon.com/512/2111/2111624.png", cat: "Apps" },
            { id: 7, name: "PLN 20k", price: 22000, img: "https://cdn-icons-png.flaticon.com/512/3500/3500833.png", cat: "Voucher" },
            { id: 8, name: "Telkomsel 25k", price: 27000, img: "https://cdn-icons-png.flaticon.com/512/3616/3616927.png", cat: "Voucher" },
        ];

        let user = { name: "Player", balance: 0, xp: 0, level: 1, history: [] };
        let selectedProd = null;
        let payMethod = 'saldo';
        let adminClicks = 0;

        // AUDIO
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        function playSfx(type) {
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain); gain.connect(audioCtx.destination);
            
            if(type === 'click') {
                osc.type = 'sine'; osc.frequency.value = 800;
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                osc.start(); osc.stop(audioCtx.currentTime + 0.1);
            } else if(type === 'level') {
                osc.type = 'square'; osc.frequency.value = 400;
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                osc.start(); osc.stop(audioCtx.currentTime + 0.5);
            }
        }

        // INIT
        window.onload = () => {
            initUser();
            
            // Tilt Init
            if(typeof VanillaTilt !== 'undefined') {
                VanillaTilt.init(document.querySelectorAll("[data-tilt]"), { max: 15, speed: 400, glare: true, "max-glare": 0.2 });
            }
        };

        // === USER & BATTLE PASS ===
        function initUser() {
            const saved = localStorage.getItem('kj_holo_user');
            if(saved) {
                user = JSON.parse(saved);
                document.getElementById('authScreen').classList.add('hidden');
                document.getElementById('appScreen').classList.remove('hidden');
            }
            updateUI();
            renderProducts('all');
        }

        function login() {
            const name = document.getElementById('loginName').value;
            if(!name) return Swal.fire({toast:true, position:'top', title:'Enter Codename!', background:'#030014', color:'#fff', showConfirmButton:false, timer:1500});
            
            user.name = name;
            saveUser();
            initUser();
            playSfx('level');
        }

        function saveUser() {
            // Level Calc: 1 Level = 500 XP
            const newLevel = Math.floor(user.xp / 500) + 1;
            if(newLevel > user.level) {
                user.level = newLevel;
                user.balance += 2000; // Reward
                Swal.fire({title:'LEVEL UP!', text:`You reached Level ${user.level}. +Rp 2.000`, icon:'success', background:'#030014', color:'#fff'});
                playSfx('level');
                confetti();
            }
            localStorage.setItem('kj_holo_user', JSON.stringify(user));
            updateUI();
        }

        function updateUI() {
            document.getElementById('navName').innerText = user.name;
            document.getElementById('navBalance').innerText = `Rp ${user.balance.toLocaleString('id-ID')}`;
            document.getElementById('navAvatar').src = `https://api.dicebear.com/7.x/bottts/svg?seed=${user.name}`;
            document.getElementById('levelBadge').innerText = `LV.${user.level}`;
            
            // Battle Pass Bar
            const currentXP = user.xp % 500;
            const percentage = (currentXP / 500) * 100;
            document.getElementById('xpText').innerText = `${currentXP} / 500 XP`;
            document.getElementById('xpBar').style.width = `${percentage}%`;
        }

        function logout() {
            localStorage.removeItem('kj_holo_user');
            location.reload();
        }

        // === PRODUCTS ===
        function renderProducts(cat) {
            const grid = document.getElementById('productGrid');
            const data = cat === 'all' ? products : products.filter(p => p.cat === cat);
            grid.innerHTML = data.map(p => `
                <div class="glass p-4 rounded-xl relative group overflow-hidden cursor-pointer hover:border-holo-primary transition-all" onclick="openOrder(${p.id})">
                    <div class="absolute inset-0 bg-gradient-to-b from-holo-primary/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    <img src="${p.img}" class="w-14 h-14 object-contain mb-3 mx-auto drop-shadow-[0_0_10px_rgba(255,255,255,0.3)] group-hover:scale-110 transition-transform">
                    <h4 class="font-hud font-bold text-center text-sm truncate relative z-10 glitch-text">${p.name}</h4>
                    <p class="text-center text-xs text-holo-cyan font-bold mt-1 font-mono relative z-10">Rp ${p.price.toLocaleString()}</p>
                </div>
            `).join('');
        }

        function filter(cat) {
            document.querySelectorAll('.cat-btn').forEach(b => {
                b.className = "cat-btn glass text-gray-400 px-5 py-2 rounded-full text-xs font-bold font-hud uppercase whitespace-nowrap hover:text-white";
            });
            event.target.className = "cat-btn active bg-white text-black px-5 py-2 rounded-full text-xs font-bold font-hud uppercase whitespace-nowrap";
            renderProducts(cat);
        }

        // === ORDER SYSTEM ===
        function openOrder(id) {
            playSfx('click');
            selectedProd = products.find(p => p.id === id);
            document.getElementById('mImg').src = selectedProd.img;
            document.getElementById('mTitle').innerText = selectedProd.name;
            document.getElementById('mPrice').innerText = `Rp ${selectedProd.price.toLocaleString()}`;
            document.getElementById('targetId').value = '';
            selectPay('saldo');
            document.getElementById('orderModal').classList.remove('hidden');
            document.getElementById('orderModal').classList.add('flex');
        }

        function closeModal(id) {
            document.getElementById(id).classList.add('hidden');
            document.getElementById(id).classList.remove('flex');
        }

        function selectPay(method) {
            playSfx('click');
            payMethod = method;
            const btnS = document.getElementById('paySaldo');
            const btnQ = document.getElementById('payQris');
            
            if(method === 'saldo') {
                btnS.className = "p-3 rounded-xl border border-holo-primary bg-holo-primary/20 text-left transition-all";
                btnQ.className = "p-3 rounded-xl border border-white/10 bg-transparent text-left transition-all hover:border-white";
            } else {
                btnQ.className = "p-3 rounded-xl border border-holo-primary bg-holo-primary/20 text-left transition-all";
                btnS.className = "p-3 rounded-xl border border-white/10 bg-transparent text-left transition-all hover:border-white";
            }
        }

        function processOrder() {
            playSfx('click');
            const uid = document.getElementById('targetId').value;
            if(!uid) return Swal.fire({toast:true, position:'top', title:'Input ID!', background:'#030014', color:'#fff', showConfirmButton:false, timer:1500});

            if(payMethod === 'saldo') {
                if(user.balance < selectedProd.price) {
                    closeModal('orderModal');
                    return Swal.fire({title:'Low Balance', text:'Recharge required.', icon:'error', background:'#030014', color:'#fff', confirmButtonText:'DEPOSIT', confirmButtonColor:'#7000ff', preConfirm:()=>deposit()});
                }
                user.balance -= selectedProd.price;
                user.xp += 100; // Add XP
                user.history.unshift({item: selectedProd.name, price: selectedProd.price, date: new Date().toLocaleString()});
                saveUser();
                
                closeModal('orderModal');
                Swal.fire({icon:'success', title:'Success!', text:'Item sent & +100 XP', background:'#030014', color:'#fff'});
                confetti();
            } else {
                closeModal('orderModal');
                Swal.fire({
                    html: `<h3 class="font-hud mb-2">SCAN QRIS</h3><img src="${CONFIG.qris}" class="w-48 mx-auto border-2 border-holo-cyan rounded mb-2"><p class="font-mono text-holo-cyan">Rp ${selectedProd.price.toLocaleString()}</p>`,
                    background: '#030014', color: '#fff',
                    confirmButtonText: 'CONFIRM ADMIN',
                    confirmButtonColor: '#25D366'
                }).then(res => {
                    if(res.isConfirmed) {
                        const msg = `*ORDER HOLO*%0AItem: ${selectedProd.name}%0AID: ${uid}%0AMetode: QRIS`;
                        window.open(`https://wa.me/${CONFIG.wa}?text=${msg}`, '_blank');
                    }
                });
            }
        }

        // === DEPOSIT ===
        async function deposit() {
            playSfx('click');
            const { value: amount } = await Swal.fire({
                title: 'RECHARGE',
                input: 'number',
                inputLabel: 'Amount',
                background: '#030014', color: '#fff',
                confirmButtonColor: '#7000ff'
            });

            if(amount) {
                const ref = "DEP-"+Date.now().toString().slice(-5);
                await Swal.fire({
                    html: `
                        <h3 class="font-hud mb-2 text-xl">SCAN TO PAY</h3>
                        <img src="${CONFIG.qris}" class="w-48 mx-auto rounded border border-white/20 mb-4">
                        <p class="font-mono text-xl font-bold text-holo-cyan">Rp ${parseInt(amount).toLocaleString()}</p>
                        <p class="text-xs text-gray-500 font-mono mt-1">REF: ${ref}</p>
                    `,
                    background: '#030014', color: '#fff',
                    confirmButtonText: 'I HAVE PAID',
                    confirmButtonColor: '#25D366'
                }).then((res) => {
                    if(res.isConfirmed) {
                        const msg = `*DEPOSIT HOLO*%0AAmount: Rp ${amount}%0ARef: ${ref}%0AUser: ${user.name}`;
                        window.open(`https://wa.me/${CONFIG.wa}?text=${msg}`, '_blank');
                    }
                });
            }
        }

        // === ADMIN GOD MODE ===
        function triggerAdmin() {
            adminClicks++;
            if(adminClicks === 5) {
                playSfx('level');
                Swal.fire({title:'ACCESS CODE', input:'password', background:'#030014', color:'#fff'}).then(res => {
                    if(res.value === '1234') {
                        document.getElementById('adminModal').classList.remove('hidden');
                        document.getElementById('adminModal').classList.add('flex');
                    }
                });
                adminClicks = 0;
            }
        }

        function adminAction(type) {
            if(type === 'saldo') {
                user.balance += 1000000;
                saveUser();
                Swal.fire({icon:'success', title:'+1M CREDITS', background:'#030014', color:'#fff'});
            } else if(type === 'xp') {
                user.xp += 500;
                saveUser();
                Swal.fire({icon:'success', title:'+500 XP', background:'#030014', color:'#fff'});
            } else if(type === 'reset') {
                logout();
            }
            closeModal('adminModal');
        }

        // UTILS
        function contactAdmin() { window.open(`https://wa.me/${CONFIG.wa}`, '_blank'); }
        function openHistory() { 
            const list = user.history.map(h => `${h.item} | Rp ${h.price}`).join('\n') || 'NO DATA';
            Swal.fire({title:'TRANSACTION LOGS', text: list, background:'#030014', color:'#fff'});
        }
        function openPass() { Swal.fire({title:'BATTLE PASS', text:`Current Level: ${user.level}\nXP: ${user.xp}`, icon:'info', background:'#030014', color:'#fff'}); }

    </script>
</body>
</html>


